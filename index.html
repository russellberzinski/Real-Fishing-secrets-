<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AnglerPage ‚Äî Share catches. Find water.</title>
  <meta name="description" content="AnglerPage: a clean, fast fishing feed. Sign in, create a profile, post catches, and browse the community." />

  <style>
    :root{
      --bg:#0b120d;
      --card:#121b12;
      --text:#f3f1e7;
      --muted:#c9c2aa;
      --line:#2c3a2b;
      --accent:#7aa35a;
      --accent2:#b08a5a;
      --danger:#ff6b6b;
      --ok:#6bff95;
      --shadow: 0 10px 35px rgba(0,0,0,.35);
      --radius: 18px;
      --max: 1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(122,163,90,.20), transparent 60%),
        radial-gradient(900px 500px at 90% 10%, rgba(176,138,90,.14), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:16px}
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(18,27,18,.78);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .topbar{display:flex; gap:12px; align-items:center; justify-content:space-between}
    .brand{display:flex; gap:10px; align-items:center}
    .logo{
      width:40px;height:40px;border-radius:14px;
      display:grid;place-items:center;
      background: linear-gradient(135deg, rgba(122,163,90,.95), rgba(176,138,90,.55));
      box-shadow: var(--shadow);
      font-weight:900;
    }
    .brand h1{margin:0; font-size:16px; letter-spacing:.4px}
    .brand small{display:block; color:var(--muted); margin-top:2px; font-size:12px}

    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding:10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:700;
      transition: transform .06s ease, filter .12s ease, border-color .12s ease;
    }
    .btn:hover{filter:brightness(1.08); border-color: rgba(255,255,255,.20)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{
      background: linear-gradient(135deg, rgba(122,163,90,.95), rgba(122,163,90,.55));
      border-color: rgba(122,163,90,.65);
    }
    .btn.danger{background: rgba(255,107,107,.10); border-color: rgba(255,107,107,.35); color:#ffdede}
    .btn.ghost{background: transparent}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .pill{
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      font-size:12px; color: var(--muted);
    }

    /* Hero */
    .hero{padding:18px 0 8px}
    .heroCard{
      display:grid; gap:14px;
      grid-template-columns: 1.2fr .8fr;
      padding:18px;
      border-radius: var(--radius);
      background: rgba(18,27,18,.75);
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .heroCard:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(600px 300px at 25% 0%, rgba(122,163,90,.22), transparent 65%),
                  radial-gradient(500px 260px at 80% 10%, rgba(176,138,90,.18), transparent 60%);
      pointer-events:none;
    }
    .heroLeft, .heroRight{position:relative}
    .hero h2{margin:0 0 8px; font-size:26px; letter-spacing:.2px}
    .hero p{margin:0 0 12px; color:var(--muted); line-height:1.45}
    .hero .actions{display:flex; gap:10px; flex-wrap:wrap}
    .grid2{display:grid; gap:10px; grid-template-columns: 1fr 1fr}
    .stat{
      padding:12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.16);
    }
    .stat b{display:block; font-size:14px}
    .stat small{color:var(--muted)}
    @media (max-width:900px){
      .heroCard{grid-template-columns: 1fr}
    }

    /* Main layout */
    main{padding:14px 0 40px}
    .layout{display:grid; grid-template-columns: 360px 1fr; gap:14px; align-items:start}
    @media (max-width:980px){
      .layout{grid-template-columns: 1fr}
    }
    .card{
      padding:14px;
      border-radius: var(--radius);
      background: rgba(18,27,18,.78);
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
    }
    .card h3{margin:0 0 10px; font-size:16px}
    label{display:block; font-size:12px; color:var(--muted); margin:10px 0 6px}
    input, textarea, select{
      width:100%;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding: 10px 10px;
      outline: none;
    }
    textarea{min-height:86px; resize:vertical}
    .hint{font-size:12px;color:var(--muted); margin-top:6px}

    /* Feed */
    .feedTop{
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:10px;
    }
    .feed{display:grid; gap:12px}
    .post{
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.16);
      overflow:hidden;
    }
    .postHead{
      padding:12px 12px 10px;
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .who{display:flex; gap:10px; align-items:center}
    .avatar{
      width:36px;height:36px;border-radius: 50%;
      background: rgba(122,163,90,.20);
      border:1px solid rgba(255,255,255,.10);
      display:grid;place-items:center;font-weight:900;
    }
    .who b{display:block; font-size:13px}
    .who small{display:block; color:var(--muted); font-size:12px}
    .tag{font-size:12px; color: var(--muted)}
    .postBody{padding:12px}
    .postMedia{
      margin-top:10px;
      display:grid; gap:10px;
    }
    .postMedia img, .postMedia video{
      width:100%;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.08);
      display:block;
      background: rgba(0,0,0,.25);
    }
    .postFoot{
      padding:10px 12px 12px;
      display:flex; gap:10px; flex-wrap:wrap;
      border-top:1px solid rgba(255,255,255,.06);
      align-items:center; justify-content:space-between;
    }
    .muted{color:var(--muted)}
    .toast{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 14px;
      background: rgba(0,0,0,.72);
      border:1px solid rgba(255,255,255,.12);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      display:none;
      z-index: 9999;
      max-width: min(820px, calc(100% - 24px));
      box-shadow: var(--shadow);
    }
    .sep{height:1px;background:rgba(255,255,255,.08); margin:10px 0}
    .tiny{font-size:12px}
    .right{margin-left:auto}
    .hidden{display:none !important}
  </style>
</head>

<body>
  <header>
    <div class="wrap topbar">
      <div class="brand">
        <div class="logo">AP</div>
        <div>
          <h1>AnglerPage</h1>
          <small>Clean community feed ‚Ä¢ profiles ‚Ä¢ posts</small>
        </div>
      </div>

      <div class="row">
        <span class="pill" id="authPill">Not signed in</span>
        <button class="btn primary" id="btnSignIn">Sign in with Google</button>
        <button class="btn ghost hidden" id="btnSignOut">Sign out</button>
      </div>
    </div>
  </header>

  <div class="wrap hero">
    <div class="heroCard">
      <div class="heroLeft">
        <h2>Share catches. Find water. Keep it simple.</h2>
        <p>
          This is a fresh, stable starting point for AnglerPage.
          We‚Äôll add features step-by-step (profile saving, posting images/videos, filters, paid unlocks, etc.)
          without breaking the basics.
        </p>
        <div class="actions">
          <button class="btn primary" id="btnGoPost">Create a post</button>
          <button class="btn" id="btnGoFeed">Browse feed</button>
        </div>
      </div>

      <div class="heroRight">
        <div class="grid2">
          <div class="stat">
            <b>‚úÖ Stable foundation</b>
            <small>No fancy stuff until auth + profile + posts are solid.</small>
          </div>
          <div class="stat">
            <b>üì∏ Media-ready</b>
            <small>Supports image + video URLs now; uploads later.</small>
          </div>
          <div class="stat">
            <b>üîé Search + filters</b>
            <small>We‚Äôll add species/state sorting next.</small>
          </div>
          <div class="stat">
            <b>üí≥ Monetize later</b>
            <small>Add paid unlocks after posting works.</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <main class="wrap">
    <div class="layout">
      <!-- LEFT: account + profile + post form -->
      <section class="card">
        <h3>Account & Profile</h3>

        <div class="row">
          <div class="pill" id="userLine">Signed out</div>
        </div>

        <div class="sep"></div>

        <div id="profileBox" class="hidden">
          <label>Display name</label>
          <input id="profileName" placeholder="e.g., Russell" maxlength="40" />

          <label>Home state (optional)</label>
          <input id="profileState" placeholder="e.g., WI" maxlength="30" />

          <label>Bio (optional)</label>
          <textarea id="profileBio" placeholder="What do you fish for?"></textarea>

          <div class="row" style="margin-top:10px">
            <button class="btn primary" id="btnSaveProfile">Save profile</button>
            <span class="tiny muted" id="profileStatus"></span>
          </div>
          <div class="hint">Profile saves to Firestore (we‚Äôll hook it up after you add your Firebase config).</div>
        </div>

        <div class="sep"></div>

        <h3>Create a Post</h3>
        <div id="postBox" class="hidden">
          <label>Title</label>
          <input id="postTitle" placeholder="e.g., 5lb largemouth at dusk" maxlength="120" />

          <div class="grid2">
            <div>
              <label>Species (optional)</label>
              <input id="postSpecies" placeholder="Bass, Walleye, Pike..." maxlength="40" />
            </div>
            <div>
              <label>State (optional)</label>
              <input id="postState" placeholder="WI, MI..." maxlength="30" />
            </div>
          </div>

          <label>Description (optional)</label>
          <textarea id="postDesc" placeholder="Conditions, bait, time of day..."></textarea>

          <label>Image URL (optional)</label>
          <input id="postImageUrl" placeholder="https://..." />

          <label>Video URL (optional)</label>
          <input id="postVideoUrl" placeholder="https://..." />

          <div class="row" style="margin-top:10px">
            <button class="btn primary" id="btnPublish">Publish</button>
            <button class="btn" id="btnClear">Clear</button>
            <span class="tiny muted right" id="postStatus"></span>
          </div>

          <div class="hint">
            For now this accepts URLs (YouTube, Cloudinary, etc.). Next step we can add real uploads.
          </div>
        </div>

        <div id="signinHint" class="hint">
          Sign in to create a profile and post. Browsing the feed is open.
        </div>
      </section>

      <!-- RIGHT: feed -->
      <section class="card">
        <div class="feedTop">
          <h3 style="margin:0">Community Feed</h3>
          <div class="row">
            <input id="search" placeholder="Search title/species/state..." style="width:260px; max-width:65vw" />
            <button class="btn" id="btnRefresh">Refresh</button>
          </div>
        </div>

        <div class="hint" style="margin-bottom:10px">
          Right now the feed runs in ‚Äúdemo mode‚Äù until Firebase is connected. You‚Äôll still see sample posts.
        </div>

        <div class="feed" id="feed"></div>
      </section>
    </div>
  </main>

  <div class="toast" id="toast"></div>

  <!-- Firebase (optional now): we'll turn on once you paste your config -->
  <!--
    1) Create a Firebase project
    2) Enable Authentication > Google
    3) Create Firestore Database
    4) Paste your firebaseConfig below
  -->
  <script type="module">
    /********************
     * 1) DEMO DATA
     ********************/
    const demoPosts = [
      {
        title: "Sunset smallmouth on a jerkbait",
        species: "Smallmouth Bass",
        state: "WI",
        desc: "Windy point + rocky shoreline. Short pauses did it.",
        imageUrl: "https://images.unsplash.com/photo-1520975958225-7f61d90d1f66?auto=format&fit=crop&w=1400&q=80",
        videoUrl: "",
        authorName: "RiverRat",
        createdAt: Date.now() - 1000*60*30
      },
      {
        title: "First ice crappies",
        species: "Crappie",
        state: "MN",
        desc: "Tiny jig, 10‚Äì12 ft, just off weeds.",
        imageUrl: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=1400&q=80",
        videoUrl: "",
        authorName: "TipUpTom",
        createdAt: Date.now() - 1000*60*60*6
      }
    ];

    /********************
     * 2) UI HELPERS
     ********************/
    const $ = (id) => document.getElementById(id);
    const toast = (msg) => {
      const el = $("toast");
      el.textContent = msg;
      el.style.display = "block";
      clearTimeout(window.__t);
      window.__t = setTimeout(()=> el.style.display="none", 2400);
    };
    const fmtTime = (ms) => new Date(ms).toLocaleString();

    function avatarLetter(name){
      const s = (name || "?").trim();
      return s ? s[0].toUpperCase() : "?";
    }

    function renderPost(p){
      const safe = (v) => (v ?? "").toString();
      const title = safe(p.title);
      const desc = safe(p.desc);
      const species = safe(p.species);
      const state = safe(p.state);
      const author = safe(p.authorName || "Anonymous");
      const createdAt = p.createdAt || Date.now();

      const media = [];
      if (p.imageUrl) {
        media.push(`<img src="${safe(p.imageUrl)}" alt="catch" loading="lazy" />`);
      }
      if (p.videoUrl) {
        // Use <video> only for direct mp4/webm links. Otherwise show link.
        const url = safe(p.videoUrl);
        const isDirect = /\.(mp4|webm|ogg)(\?.*)?$/i.test(url);
        if (isDirect) {
          media.push(`<video controls src="${url}"></video>`);
        } else {
          media.push(`<a class="btn" href="${url}" target="_blank" rel="noopener">Open video</a>`);
        }
      }

      return `
        <article class="post">
          <div class="postHead">
            <div class="who">
              <div class="avatar">${avatarLetter(author)}</div>
              <div>
                <b>${author}</b>
                <small>${fmtTime(createdAt)}</small>
              </div>
            </div>
            <div class="tag">${species ? species : ""}${(species && state) ? " ‚Ä¢ " : ""}${state ? state : ""}</div>
          </div>
          <div class="postBody">
            <b>${title}</b>
            ${desc ? `<div class="muted" style="margin-top:6px; line-height:1.45">${desc}</div>` : ""}
            ${media.length ? `<div class="postMedia">${media.join("")}</div>` : ""}
          </div>
          <div class="postFoot">
            <span class="tiny muted">AnglerPage</span>
            <span class="tiny muted">Demo mode</span>
          </div>
        </article>
      `;
    }

    function renderFeed(list){
      const feed = $("feed");
      if (!list.length){
        feed.innerHTML = `<div class="muted">No posts yet.</div>`;
        return;
      }
      feed.innerHTML = list.map(renderPost).join("");
    }

    function applySearch(list){
      const q = ($("search").value || "").trim().toLowerCase();
      if (!q) return list;
      return list.filter(p => {
        const hay = `${p.title||""} ${p.desc||""} ${p.species||""} ${p.state||""} ${p.authorName||""}`.toLowerCase();
        return hay.includes(q);
      });
    }

    /********************
     * 3) AUTH + FIREBASE PLACEHOLDERS
     * We keep the page stable even before Firebase is added.
     ********************/
    let currentUser = null; // when Firebase is hooked up, set this to auth.currentUser

    function setSignedOut(){
      currentUser = null;
      $("authPill").textContent = "Not signed in";
      $("userLine").textContent = "Signed out";
      $("btnSignIn").classList.remove("hidden");
      $("btnSignOut").classList.add("hidden");
      $("profileBox").classList.add("hidden");
      $("postBox").classList.add("hidden");
      $("signinHint").classList.remove("hidden");
    }

    function setSignedIn(fakeName){
      // For demo only (until Firebase is connected)
      currentUser = { uid: "demo", displayName: fakeName || "Angler" };
      $("authPill").textContent = "Signed in";
      $("userLine").textContent = `Signed in as ${currentUser.displayName}`;
      $("btnSignIn").classList.add("hidden");
      $("btnSignOut").classList.remove("hidden");
      $("profileBox").classList.remove("hidden");
      $("postBox").classList.remove("hidden");
      $("signinHint").classList.add("hidden");
      $("profileName").value = currentUser.displayName;
    }

    /********************
     * 4) BUTTONS
     ********************/
    $("btnSignIn").addEventListener("click", async () => {
      // DEMO sign-in. Replace with Firebase GoogleAuthProvider + signInWithPopup later.
      const name = prompt("Demo sign-in: enter a display name", "Angler");
      if (!name) return;
      setSignedIn(name.trim().slice(0,40));
      toast("Signed in (demo). Next we‚Äôll connect Firebase.");
    });

    $("btnSignOut").addEventListener("click", async () => {
      setSignedOut();
      toast("Signed out.");
    });

    $("btnSaveProfile").addEventListener("click", async () => {
      if (!currentUser) return toast("Sign in first.");
      const name = $("profileName").value.trim();
      $("profileStatus").textContent = "Saved (demo).";
      // Later: save to Firestore: profiles/{uid}
      toast("Profile saved (demo).");
    });

    $("btnPublish").addEventListener("click", async () => {
      if (!currentUser) return toast("Sign in first.");

      const title = $("postTitle").value.trim();
      if (title.length < 2) return toast("Title is required.");

      const newPost = {
        title,
        species: $("postSpecies").value.trim(),
        state: $("postState").value.trim(),
        desc: $("postDesc").value.trim(),
        imageUrl: $("postImageUrl").value.trim(),
        videoUrl: $("postVideoUrl").value.trim(),
        authorName: $("profileName").value.trim() || currentUser.displayName || "Angler",
        createdAt: Date.now()
      };

      demoPosts.unshift(newPost);
      $("postStatus").textContent = "Published (demo).";
      renderFeed(applySearch(demoPosts));
      toast("Post published (demo).");
      window.scrollTo({top:0, behavior:"smooth"});
    });

    $("btnClear").addEventListener("click", () => {
      $("postTitle").value = "";
      $("postSpecies").value = "";
      $("postState").value = "";
      $("postDesc").value = "";
      $("postImageUrl").value = "";
      $("postVideoUrl").value = "";
      $("postStatus").textContent = "";
      toast("Cleared.");
    });

    $("btnRefresh").addEventListener("click", () => {
      renderFeed(applySearch(demoPosts));
      toast("Refreshed.");
    });

    $("search").addEventListener("input", () => {
      renderFeed(applySearch(demoPosts));
    });

    $("btnGoPost").addEventListener("click", () => {
      document.querySelector("#postTitle")?.scrollIntoView({behavior:"smooth", block:"center"});
      if (!currentUser) toast("Sign in to post.");
    });

    $("btnGoFeed").addEventListener("click", () => {
      document.querySelector("#feed")?.scrollIntoView({behavior:"smooth", block:"start"});
    });

    /********************
     * 5) INITIALIZE
     ********************/
    setSignedOut();
    renderFeed(demoPosts);

    // ==========================================
    // NEXT STEP (when you‚Äôre ready):
    // - Paste Firebase config
    // - Enable Google sign-in
    // - Replace demo sign-in/out with Firebase auth
    // - Replace demoPosts with Firestore reads/writes
    // ==========================================
  </script>
</body>
</html>
